<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Google Calendar Integration</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <link href="../../../../styles.css" rel="stylesheet" />


        <!-- Theme -->
        <link href="../../../../css/dx.common.css" rel="stylesheet" />
        <link rel="dx-theme" data-theme="generic.dark" href="../../../../css/dx.dark.css" data-active="false" />
        <link rel="dx-theme" data-theme="generic.light" href="../../../../css/dx.light.css" data-active="true" />
        <link rel="dx-theme" data-theme="win8.black" href="../../../../css/dx.win8.black.css" data-active="false" />
        <link rel="dx-theme" data-theme="win8.white" href="../../../../css/dx.win8.white.css" data-active="false" />
        <link rel="dx-theme" data-theme="ios7" href="../../../../css/dx.ios7.default.css" data-active="false" />

        <!--[if lt IE 9]>
        <script type="text/javascript" src="../../../../js/jquery-1.11.3.min.js"></script>
        <![endif]-->
        <!--[if gte IE 9]><!-->
        <script src="../../../../js/jquery-2.1.4.min.js"></script>
        <!--<![endif]-->
        <script src="../../../../js/knockout-3.3.0.js"></script>
        <script src="../../../../js/globalize.min.js"></script>
        <script src="../../../../js/dx.chartjs.js"></script><script src="../../../../js/dx.webappjs.js"></script>
        <script src="../../../../js/jszip.min.js"></script>
        <script src="../../../../js/underscore-1.5.1.min.js"></script>
        <script src="../../../../js.js"></script>
        
    </head>
    <body class="dx-viewport" id="dx-viewport">
        <style>.note {
    color: rgba(128, 128, 128, 0.75);
    float: right;
    margin-top: 20px;
    font-size: 12px;
}</style>
        <script id="jsCode">
    $(function ()
        {
   ;
var PUBLICK_KEY = "AIzaSyBnNAISIUKe6xdhq1_rjor2rxoI3UlMY7k",
    CALENDAR_ID = "f7jnetm22dsjc3npc2lu3buvu4@group.calendar.google.com";

$(".scheduler").dxScheduler({
    dataSource: new DevExpress.data.DataSource({
        store: new DevExpress.data.CustomStore({
            load: function(options) {
                var result = $.Deferred();
                $.ajax({
                    data: {showDeleted: false},
                    url: [
                        "https://www.googleapis.com/calendar/v3/calendars/",
                        CALENDAR_ID,
                        "/events?key=",
                        PUBLICK_KEY
                    ].join("")
                }).done(function(response) {

                    result.resolve(DevExpress.data
                                             .query(response.items)
                                             .filter(options.filter)
                                             .toArray());
                });

                return result.promise();
            }
        }),
        map: function(item) {
            var appointment = {
                text: item.summary,
                description: item.description,
                startDate: item.start.dateTime || item.start.date,
                endDate: item.end.dateTime || item.end.date
            };

            if(item.start.date) {
                appointment.allDay = true;
            }

            if(item.recurrence) {
                appointment.recurrenceRule = item.recurrence[0].replace("RRULE:", "");
            }

            return appointment;
        }
    }),
    editing: false,
    currentDate: new Date(2015, 4, 25),
    firstDayOfWeek: 0,
    views: ["day", "workWeek", "month"],
    currentView: "workWeek",
    height: 500
});

var timezoneParseNameResults = /\((.*)\)/.exec(new Date().toString());

if(timezoneParseNameResults && timezoneParseNameResults.length > 0) {
    $("#timezone").text(timezoneParseNameResults[1]);
} else {
    var timezoneOffset = new Date().getTimezoneOffset();
    $("#timezone").text("UTC" + (timezoneOffset < 0 ? "+" : "") + timezoneOffset/(-60) + " time zone");
}
}

    );
        </script>
        
        <div class="header">
            <div class="content">
                <div id="onlinedemo" class="button"></div>
                <div class = "logo">
                    <a class="logo" title="WidgetsJS Gallery" href="../../../../index.html"></a>
                </div>
            </div>
        </div>
        <div class="line"></div>
        <div class="title ">
            <h1>Scheduler</h1><h2>Google Calendar Integration</h2>
        </div>
        <div class="content containerPlaceholder">
            <div class="tab dark-theme">
                <div class="text">Dark Theme</div>
            </div>
            <div class="tab light-theme active">
                <div class="text">Light Theme</div>
             </div> 
            <div class="pane dx-theme-desktop">
                <div>
                    <div class="long-title"><h3>Tasks for Employees (USA Office)</h3></div>
                    <div id="full"><div class="scheduler"></div>
<div class="note">Note: The scheduler displays tasks using time of the 
    <b>
        <span id="timezone"></span>
    </b>.
</div></div>
                    <div class="credits"></div>
                </div>
            </div>
        </div>
        
        <script id="html" type="html/template">
        <div class="scheduler"></div>
<div class="note">Note: The scheduler displays tasks using time of the 
    <b>
        <span id="timezone"></span>
    </b>.
</div>
        </script>
        <script>
            $("#onlinedemo.button").dxButton({
                text: "Online Demo Gallery",
                onClick: function () { document.location.href = "http://js.devexpress.com/Demos/WidgetsGallery/" }
            });
        </script>
    </body>
</html>
